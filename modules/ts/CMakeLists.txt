if(BUILD_TESTS OR BUILD_PERF_TESTS)
    if(BUILD_SHARED_LIBS AND NOT MINGW)
        add_definitions(-DGTEST_CREATE_SHARED_LIBRARY=1)
        if (MSVC)
            add_definitions( "/wd4251 /wd4275")
        endif()
    else()
        add_definitions(-DGTEST_CREATE_SHARED_LIBRARY=0)
    endif()

    if(MINGW)
        set(OPENCV_TS_MODULE_TYPE STATIC)
    endif()

    define_opencv_module(ts opencv_core)
endif()
